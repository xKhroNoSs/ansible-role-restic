# Restic user creation

restic_user_create: yes
restic_user: restic
restic_user_shell: /usr/sbin/nologin
restic_user_home: /nonexistent
restic_user_create_home: no
restic_user_system: yes
restic_user_group: restic

# Restic install

restic_install_repo: true
restic_install_binary: false
restic_install_binary_location: /usr/local/bin
restic_install_binary_perms: '0700'
restic_install_version: '0.14.0'
restic_install_architecture: 'amd64'
restic_install_download_location: '/tmp'

# Restic backup configuration

restic_backup_configs_location: /var/restic/
restic_backup_configs_location_perms: 0700
restic_backup_sh_location: /bin/sh

restic_backup_name: restic_backup
restic_backup_filestobackup_dst: /var/restic/{{ restic_backup_name }}
restic_backup_systemd: true
restic_backup_systemd_service_location: /etc/systemd/system
restic_backup_systemd_timer_location: /etc/systemd/system
restic_backup_systemd_timer_plan: daily
restic_backup_systemd_config_location: "{{ restic_backup_systemd_service_location }}/{{ restic_backup_name }}"
restic_backup_cron: false
restic_backup_cron_plan: 0 0 * * *
restic_backup_systemd_cron_location: "/etc/default/{{ restic_backup_name }}"
restic_backup_configs_perms: 0600
restic_backup_filestobackup:
restic_backup_config_default:
  - RESTIC_COMPRESSION: auto
  - RESTIC_CACHE_DIR: /var/restic/cache
  - TMPDIR: /tmp

restic_backup_config: {}
restic_backup_config_combined: "{{ restic_backup_config_default | combine(restic_backup_config) }}"